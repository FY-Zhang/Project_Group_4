# Technical Design of Suplink

>  This document will describe the technologies using and design details.

- <a href="#techUsing" style="text-decoration:none">Technologies using</a>
- <a href="#techUsing" style="text-decoration:none">Technologies design</a>
- <a href="#techLessons" style="text-decoration:none">Lessons</a>



## Technologies using <span id="techUsing"> </span>

#### 1. User Authentication

###### Supported by: <a href="https://firebase.google.com/docs/auth" style="text-decoration:none">Firebase  Firestore</a>

```java
import com.google.firebase.auth.FirebaseAuth;
import com.google.firebase.auth.FirebaseUser;
```

  To use Suplink app, users need to create their own account. Our user account system is based on Firebase user authentication, which can support user sign up, log in  and change password. 



#### 2. Database

###### Supported by: <a href="https://firebase.google.com/docs/firestore" style="text-decoration:none">Firebase Cloud Firestore</a>

```java
import com.google.firebase.firestore.FirebaseFirestore;
```

The database is based on Firebase Firestore, it is a flexible, scalable NoSQL cloud database which can store and sync data for client- and server-side development.



#### 3. Real-time Chat

###### Supported by: <a href="https://firebase.google.com/docs/database" style="text-decoration:none">Firebase Realtime Database</a>

```Gradle
implementation 'com.google.firebase:firebase-database:19.3.0'
```

```Java
import com.google.firebase.database.FirebaseDatabase;
```

The chat function is based on Firebase real-time database, which could synchronize data in real-time to every connected client.



#### 4. Map & Location

###### Supported by: <a href="https://cloud.google.com/maps-platform" style="text-decoration:none">Google Maps Platform</a>

```java
import com.google.android.gms.maps.GoogleMap;
import com.google.maps.android.SphericalUtil;
```

The map and location function is based on Google maps, through cooperation with SphericalUtil, users can check official sites, collect personal sites and search nearby users. Navigation function has been embedded in maps.   



#### 5. Images & Photography

###### Supported by: <a href="https://firebase.google.com/docs/storage" style="text-decoration:none">Firebase Cloud Storage</a>

```java
import com.google.firebase.storage.FirebaseStorage;
import android.provider.MediaStore;
import com.squareup.picasso.Picasso;
```

The image storage function is based on Firebase Cloud Storage, which can store and serve user-generated content, such as photos or videos. Once user submitted, imaged will be uploaded into the cloud storage. Images can be chose from phone album or be taken by the camera.



## Technical Design <span id="techDesign"> </span>

#### 1. Database

Although the use of Room (SQLite) as the Android database has become the norm, considering that Firebase is a cloud, collaboration and off-line supported service, which is also of perfect response,  we think Firebase will be a better choice.

#### 2. Map & Location 

Since the huge amount of active users and 99% coverage of the world, We chose Google Maps as the map support platform, and then we can use the flexible marker toolkit as well. 

#### 3. Local cookies

The cookie mechanisms we have learned so far are CookieManager and httpCookie, which both are based on using webview.
We haven't found an effective internal cookie method for the program. Our initial idea was to store the generated content in a readable and writable file, and then use the file class to read and write. As considered the convenience, we finally designed a class called AppCookie to save the user's temporary data.

###### Class Structure:

```java
public class appCookies {
    public static Datatype cookieData 

    public static void storeData(){
        // operations
	}
}
```

#### 4.  Page transfer

Fragment was used in order to make page transfer smoothly. We override the onKeyDown() and use finish() timely as well.  

#### 5.  Dynamical view

Since our app has many scenarios to use dynamical list views, we finally chose ListView with SimpleAdapter as considered the powerful and convenient data-view map, 



## Lessons <span id="techLessons"> </span>

1. The mobile development is not only programming, but also needs to consider the logic between different activities, consider the user experience and UI design.

2. You should be skilled and use Git-based tools as much as possible, which will greatly facilitate the cooperation between developers and effectively reduce development time. For us, Github is a good choice.

3. Although it is convenient to use the cookie class (appCookie) designed by ourselves, it is not powerful, and the temporary data generated by the user within a period of time will be cleared once the user exits the app. Therefore, using local text files to store cookies may be a better choice. Of course, we prefer to use the appropriate API.

4. The naming of Java files should be more reasonable. The Java files under the same activity should make the first part of the file name the same, which will make it easier to focus on the current task when developing.

5. APIs are supported differently under different Android versions.  And view rendering is also different for different sizes.

6. The completed app should be tested and should be tried under different Android versions.

   

    <div style="text-align:right">
        <a href="#techUsing" style="text-decoration:none"><button>Back to top</button></a>
    </div>

   